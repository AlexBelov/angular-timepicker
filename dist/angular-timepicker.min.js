/*! angular-timepicker 1.0.8 | (c) 2015, Geta AS | MIT (http://www.opensource.org/licenses/MIT) */
!function(a){"use strict";a.module("dnTimepicker",["ui.bootstrap.position","dateParser"]).factory("dnTimepickerHelpers",function(){return{stringToMinutes:function(a){if(!a)return null;var b=a.match(/(\d+)(h?)/);return b[1]?b[1]*(b[2]?60:1):null},dateToMinutes:function(a){var b=0;return b=24!=a.getHours()?60*a.getHours()+a.getMinutes():a.getMinutes()},buildOptionList:function(b,c,d){for(var e=[],f=a.copy(b);c>=f;)e.push(new Date(f)),f.setMinutes(f.getMinutes()+d);return e},getClosestIndex:function(b,c){if(!a.isDate(b))return-1;for(var d=null,e=-1,f=60*b.getHours()+b.getMinutes(),g=0;g<c.length;g++){var h=c[g],i=60*h.getHours()+h.getMinutes();(null===d||Math.abs(i-f)<Math.abs(d-f))&&(d=i,e=g)}return e}}}).directive("dnTimepicker",["$compile","$parse","$position","$document","dateFilter","$dateParser","dnTimepickerHelpers","$log",function(b,c,d,e,f,g,h,i){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function(c,i,j,k){function l(a){return n=h.dateToMinutes(a),m(n),n}function m(a){n=a}var n=null,o=[],p=!0;c.timepicker={element:null,timeFormat:"h:mm a",minTime:g("0:00","H:mm"),maxTime:g("23:59","H:mm"),step:1,isOpen:!1,activeIdx:-1,optionList:function(){return p&&(o=h.buildOptionList(c.timepicker.minTime,c.timepicker.maxTime,c.timepicker.step),p=!1),o}},j.$observe("dnTimepicker",function(a){a&&(c.timepicker.timeFormat=a),k.$render()}),j.$observe("minTime",function(a){a&&(c.timepicker.minTime=g(a,c.timepicker.timeFormat),p=!0)}),j.$observe("maxTime",function(a){a&&(c.timepicker.maxTime=g(a,c.timepicker.timeFormat),p=!0)}),j.$observe("step",function(a){if(a){var b=h.stringToMinutes(a);b&&(c.timepicker.step=b),p=!0}}),c.$watch("ngModel",function(a){a||(c.ngModel=n),m(a),k.$render()}),k.$render=function(){n=n?n:0;var a=parseInt(n/60);a=10>a?"0"+a:a;var b=n%60;b=10>b?"0"+b:b,i.val(f(g(a+":"+b,"H:mm"),c.timepicker.timeFormat))},k.$parsers.unshift(function(b){var d=a.isDate(b)?b:g(b,c.timepicker.timeFormat);return isNaN(d)?void k.$setValidity("time",!1):(k.$setValidity("time",!0),l(d))}),c.select=function(b){a.isDate(b)&&(k.$setViewValue(l(b)),k.$render())},c.isActive=function(a){return a===c.timepicker.activeIdx},c.setActive=function(a){c.timepicker.activeIdx=a},c.scrollToSelected=function(){if(c.timepicker.element&&c.timepicker.activeIdx>-1){var a=c.timepicker.element[0].querySelector(".active");a.parentNode.scrollTop=a.offsetTop-50}},c.openPopup=function(){c.position=d.position(i),c.position.top=c.position.top+i.prop("offsetHeight"),c.timepicker.isOpen=!0;var a=c.ngModel,b=parseInt(a/60);b=10>b?"0"+b:b;var e=a%60;e=10>e?"0"+e:e,a=g(b+":"+e,"H:mm"),c.timepicker.activeIdx=h.getClosestIndex(a,c.timepicker.optionList()),c.$digest(),c.scrollToSelected()},c.closePopup=function(){c.timepicker.isOpen&&(c.timepicker.isOpen=!1,c.$apply(),i[0].blur())},i.after(b(a.element("<div dn-timepicker-popup></div>"))(c)),i.bind("focus",function(){c.openPopup()}).bind("keypress keyup",function(a){38===a.which&&c.timepicker.activeIdx>0?(c.timepicker.activeIdx--,c.scrollToSelected()):40===a.which&&c.timepicker.activeIdx<c.timepicker.optionList().length-1?(c.timepicker.activeIdx++,c.scrollToSelected()):13===a.which&&c.timepicker.activeIdx>-1&&(c.select(c.timepicker.optionList()[c.timepicker.activeIdx]),c.closePopup()),c.$digest()}),e.bind("click",function(a){c.timepicker.isOpen&&a.target!==i[0]&&c.closePopup()}),m(c.ngModel)}}}]).directive("dnTimepickerPopup",function(){return{restrict:"A",replace:!0,transclude:!1,template:'<ul class="dn-timepicker-popup dropdown-menu" ng-style="{display: timepicker.isOpen && \'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}"><li ng-repeat="time in timepicker.optionList()" ng-class="{active: isActive($index) }" ng-mouseenter="setActive($index)"><a ng-click="select(time)">{{time | date:timepicker.timeFormat}}</a></li></ul>',link:function(a,b,c){a.timepicker.element=b,b.find("a").bind("click",function(a){a.preventDefault()})}}})}(angular);
//# sourceMappingURL=angular-timepicker.min.js.map